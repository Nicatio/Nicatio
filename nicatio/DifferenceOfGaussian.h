/*
 * DifferenceOfGaussian.h
 *
 *  Created on: 2013. 3. 5.
 *      Author: Nicatio
 */

#include <math.h>

#ifndef DIFFERENCEOFGAUSSIAN_H_
#define DIFFERENCEOFGAUSSIAN_H_

#define abs(x) (x<0)?-x:x



namespace nicatio {

static const double kernel_sigma0[49] = {1.96519161240319e-05, 0.000239409349497270, 0.00107295826497866, 0.00176900911404382, 0.00107295826497866, 0.000239409349497270, 1.96519161240319e-05,
								0.000239409349497270, 0.00291660295438644, 0.0130713075831894, 0.0215509428482683, 0.0130713075831894, 0.00291660295438644, 0.000239409349497270,
								0.00107295826497866, 0.0130713075831894, 0.0585815363306070, 0.0965846250185641, 0.0585815363306070, 0.0130713075831894, 0.00107295826497866,
								0.00176900911404382, 0.0215509428482683, 0.0965846250185641, 0.159241125690702, 0.0965846250185641, 0.0215509428482683, 0.00176900911404382,
								0.00107295826497866, 0.0130713075831894, 0.0585815363306070, 0.0965846250185641, 0.0585815363306070, 0.0130713075831894, 0.00107295826497866,
								0.000239409349497270, 0.00291660295438644, 0.0130713075831894, 0.0215509428482683, 0.0130713075831894, 0.00291660295438644, 0.000239409349497270,
								1.96519161240319e-05, 0.000239409349497270, 0.00107295826497866, 0.00176900911404382, 0.00107295826497866, 0.000239409349497270, 1.96519161240319e-05};
static const double kernel_sigma1[169] = {4.92039284956766e-06, 1.94605312269499e-05, 5.99426561741466e-05, 0.000143794956950925, 0.000268644347022705, 0.000390875218503749, 0.000442919649189681, 0.000390875218503749, 0.000268644347022705, 0.000143794956950925, 5.99426561741466e-05, 1.94605312269499e-05, 4.92039284956766e-06,
								1.94605312269499e-05, 7.69678940713786e-05, 0.000237077804144399, 0.000568720087109968, 0.00106250900365370, 0.00154594147827067, 0.00175178119463425, 0.00154594147827067, 0.00106250900365370, 0.000568720087109968, 0.000237077804144399, 7.69678940713786e-05, 1.94605312269499e-05,
								5.99426561741466e-05, 0.000237077804144399, 0.000730251046830066, 0.00175178119463425, 0.00327275813518124, 0.00476183498881057, 0.00539586595133019, 0.00476183498881057, 0.00327275813518124, 0.00175178119463425, 0.000730251046830066, 0.000237077804144399, 5.99426561741466e-05,
								0.000143794956950925, 0.000568720087109968, 0.00175178119463425, 0.00420230462824428, 0.00785093863361610, 0.0114230483086058, 0.0129440095202043, 0.0114230483086058, 0.00785093863361610, 0.00420230462824428, 0.00175178119463425, 0.000568720087109968, 0.000143794956950925,
								0.000268644347022705, 0.00106250900365370, 0.00327275813518124, 0.00785093863361610, 0.0146674843643017, 0.0213410638241057, 0.0241825934590858, 0.0213410638241057, 0.0146674843643017, 0.00785093863361610, 0.00327275813518124, 0.00106250900365370, 0.000268644347022705,
								0.000390875218503749, 0.00154594147827067, 0.00476183498881057, 0.0114230483086058, 0.0213410638241057, 0.0310510646428929, 0.0351854658661721, 0.0310510646428929, 0.0213410638241057, 0.0114230483086058, 0.00476183498881057, 0.00154594147827067, 0.000390875218503749,
								0.000442919649189681, 0.00175178119463425, 0.00539586595133019, 0.0129440095202043, 0.0241825934590858, 0.0351854658661721, 0.0398703562166886, 0.0351854658661721, 0.0241825934590858, 0.0129440095202043, 0.00539586595133019, 0.00175178119463425, 0.000442919649189681,
								0.000390875218503749, 0.00154594147827067, 0.00476183498881057, 0.0114230483086058, 0.0213410638241057, 0.0310510646428929, 0.0351854658661721, 0.0310510646428929, 0.0213410638241057, 0.0114230483086058, 0.00476183498881057, 0.00154594147827067, 0.000390875218503749,
								0.000268644347022705, 0.00106250900365370, 0.00327275813518124, 0.00785093863361610, 0.0146674843643017, 0.0213410638241057, 0.0241825934590858, 0.0213410638241057, 0.0146674843643017, 0.00785093863361610, 0.00327275813518124, 0.00106250900365370, 0.000268644347022705,
								0.000143794956950925, 0.000568720087109968, 0.00175178119463425, 0.00420230462824428, 0.00785093863361610, 0.0114230483086058, 0.0129440095202043, 0.0114230483086058, 0.00785093863361610, 0.00420230462824428, 0.00175178119463425, 0.000568720087109968, 0.000143794956950925,
								5.99426561741466e-05, 0.000237077804144399, 0.000730251046830066, 0.00175178119463425, 0.00327275813518124, 0.00476183498881057, 0.00539586595133019, 0.00476183498881057, 0.00327275813518124, 0.00175178119463425, 0.000730251046830066, 0.000237077804144399, 5.99426561741466e-05,
								1.94605312269499e-05, 7.69678940713786e-05, 0.000237077804144399, 0.000568720087109968, 0.00106250900365370, 0.00154594147827067, 0.00175178119463425, 0.00154594147827067, 0.00106250900365370, 0.000568720087109968, 0.000237077804144399, 7.69678940713786e-05, 1.94605312269499e-05,
								4.92039284956766e-06, 1.94605312269499e-05, 5.99426561741466e-05, 0.000143794956950925, 0.000268644347022705, 0.000390875218503749, 0.000442919649189681, 0.000390875218503749, 0.000268644347022705, 0.000143794956950925, 5.99426561741466e-05, 1.94605312269499e-05, 4.92039284956766e-06};

static const double gamma02[256] = {0, 84.1845014593355, 96.7025983425841, 104.871238104002, 111.082115640065, 116.151853698770, 120.465418696569, 124.237227875905, 127.599843505334,
							130.641345981941, 133.423443273633, 135.991160960499, 138.378428290778, 140.611491460475, 142.711099290443, 144.693957846253, 146.573730332456, 148.361743583935,
							150.067499224054, 151.699051211328, 153.263289806463, 154.766158617078, 156.212822889463, 157.607801690771, 158.955072944692, 160.258157781897, 161.520188934328,
							162.743966682719, 163.932004994751, 165.086569859052, 166.209711356001, 167.303290661247, 168.369002918671, 169.408396722728, 170.422890799359, 171.413788358102,
							172.382289497190, 173.329501972037, 174.256450581063, 175.164085377797, 176.053288882118, 176.924882434395, 177.779631812648, 178.618252213586, 179.441412682569,
							180.249740064501, 181.043822536888, 181.824212777302, 182.591430810002, 183.345966570167, 184.088282218920, 184.818814237812, 185.537975327672, 186.246156133475,
							186.943726814132, 187.631038473747, 188.308424468836, 188.976201604270, 189.634671229197, 190.284120242867, 190.924822019170, 191.557037257680, 192.181014768165,
							192.796992194737, 193.405196685168, 194.005845510318, 194.599146638083, 195.185299265856, 195.764494315063, 196.336914890981, 196.902736710761, 197.462128502259,
							198.015252376044, 198.562264172757, 199.103313787734, 199.638545474694, 200.168098130090, 200.692105559590, 201.210696728036, 201.723995994091, 202.232123330707,
							202.735194532420, 203.233321410433, 203.726611976320, 204.215170615167, 204.699098248859, 205.178492490192, 205.653447788420, 206.124055566811, 206.590404352729,
							207.052579900735, 207.510665309151, 207.964741130498, 208.414885476203, 208.861174115918, 209.303680571793, 209.742476208004, 210.177630315822, 210.609210194492,
							211.037281228162, 211.461906959103, 211.883149157422, 212.301067887478, 212.715721571185, 213.127167048378, 213.535459634394, 213.940653175043, 214.342800099094,
							214.741951468408, 215.138157025866, 215.531465241179, 215.921923354715, 216.309577419436, 216.694472341040, 217.076651916413, 217.456158870454, 217.833034891382,
							218.207320664576, 218.579055905040, 218.948279388545, 219.315028981523, 219.679341669768, 220.041253586003, 220.400800036363, 220.758015525852, 221.112933782814,
							221.465587782470, 221.816009769560, 222.164231280131, 222.510283162512, 222.854195597511, 223.195998117867, 223.535719626992, 223.873388417035, 224.209032186293,
							224.542678056003, 224.874352586539, 225.204081793033, 225.531891160462, 225.857805658198, 226.181849754066, 226.504047427920, 226.824422184758, 227.142997067388,
							227.459794668685, 227.774837143424, 228.088146219733, 228.399743210169, 228.709649022428, 229.017884169717, 229.324468780782, 229.629422609627, 229.932765044919,
							230.234515119096, 230.534691517192, 230.833312585389, 231.130396339302, 231.425960472009, 231.720022361841, 232.012599079932, 232.303707397540, 232.593363793157,
							232.881584459395, 233.168385309681, 233.453781984748, 233.737789858937, 234.020424046318, 234.301699406636, 234.581630551081, 234.860231847899, 235.137517427841,
							235.413501189459, 235.688196804255, 235.961617721685, 236.233777174027, 236.504688181108, 236.774363554913, 237.042815904059, 237.310057638152, 237.576100972025,
							237.840957929867, 238.104640349233, 238.367159884962, 238.628528012975, 238.888756033988, 239.147855077119, 239.405836103410, 239.662709909247, 239.918487129704,
							240.173178241795, 240.426793567643, 240.679343277577, 240.930837393139, 241.181285790027, 241.430698200960, 241.679084218471, 241.926453297638, 242.172814758735,
							242.418177789837, 242.662551449344, 242.905944668458, 243.148366253591, 243.389824888722, 243.630329137694, 243.869887446459, 244.108508145273, 244.346199450828,
							244.582969468353, 244.818826193650, 245.053777515090, 245.287831215564, 245.520994974388, 245.753276369163, 245.984682877599, 246.215221879287, 246.444900657445,
							246.673726400614, 246.901706204321, 247.128847072706, 247.355155920114, 247.580639572643, 247.805304769675, 248.029158165357, 248.252206330061, 248.474455751809,
							248.695912837666, 248.916583915103, 249.136475233341, 249.355592964647, 249.573943205626, 249.791531978465, 250.008365232164, 250.224448843742, 250.439788619406,
							250.654390295709, 250.868259540679, 251.081401954924, 251.293823072716, 251.505528363053, 251.716523230698, 251.926813017202, 252.136403001901, 252.345298402894,
							252.553504378006, 252.761026025727, 252.967868386135, 253.174036441801, 253.379535118675, 253.584369286956, 253.788543761947, 253.992063304887, 254.194932623775,
							254.397156374175, 254.598739160002, 254.799685534300, 255};


unsigned char* DoG(
		const unsigned char 			*inputImg,
		const int&						width,
		const int&						height,
		const double&					gamma,
		const double&					sigma0,
		const double&					sigma1,
		const int&						sx,
		const int&						sy,
		const int&						mask,
		const double&					do_norm);

bool convolve2DFast(
		double							*in,
		double							*out,
		int								dataSizeX,
		int								dataSizeY,
		const double					*kernel,
		int								kernelSizeX,
		int								kernelSizeY);
}


#endif /* DIFFERENCEOFGAUSSIAN_H_ */
